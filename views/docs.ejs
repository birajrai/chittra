<%- include('partials/head', { title: 'Documentation - Chittra' }) %>
    <div class="max-w-4xl mx-auto px-4 py-8">
        
        <%- include('partials/nav', { active: 'docs', baseUrl }) %>

        <h1 class="text-3xl font-bold mb-2">Documentation</h1>
        <p class="text-gray-500 mb-8">Complete guide to using Chittra placeholder image generator.</p>

        <!-- Table of Contents -->
        <div class="bg-white rounded-lg border border-gray-200 p-4 mb-8">
            <h2 class="font-semibold mb-3">Contents</h2>
            <ul class="space-y-1 text-sm">
                <li><a href="#getting-started" class="text-indigo-600 hover:underline">Getting Started</a></li>
                <li><a href="#url-structure" class="text-indigo-600 hover:underline">URL Structure</a></li>
                <li><a href="#parameters" class="text-indigo-600 hover:underline">Parameters</a></li>
                <li><a href="#formats" class="text-indigo-600 hover:underline">Output Formats</a></li>
                <li><a href="#colors" class="text-indigo-600 hover:underline">Colors</a></li>
                <li><a href="#fonts" class="text-indigo-600 hover:underline">Fonts</a></li>
                <li><a href="#examples" class="text-indigo-600 hover:underline">Examples</a></li>
                <li><a href="#html-usage" class="text-indigo-600 hover:underline">HTML Usage</a></li>
                <li><a href="#api" class="text-indigo-600 hover:underline">API Reference</a></li>
                <li><a href="#self-hosting" class="text-indigo-600 hover:underline">Self-Hosting</a></li>
            </ul>
        </div>

        <!-- Getting Started -->
        <section id="getting-started" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">Getting Started</h2>
            <p class="text-gray-600 mb-4">Generate a placeholder image by constructing a URL with your desired dimensions:</p>
            <%- include('partials/code-block', { code: baseUrl + '/600x400' }) %>
            <p class="text-gray-600">This returns an SVG image with dimensions 600x400 pixels.</p>
        </section>

        <!-- URL Structure -->
        <section id="url-structure" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">URL Structure</h2>
            <div class="bg-gray-900 rounded-lg p-4 mb-4 overflow-x-auto">
                <code class="text-gray-300"><%= baseUrl %>/<span class="text-yellow-400">{size}</span>/<span class="text-blue-400">{background}</span>/<span class="text-pink-400">{textColor}</span>/<span class="text-green-400">{format}</span>?<span class="text-purple-400">text</span>=...&<span class="text-purple-400">font</span>=...</code>
            </div>
            <p class="text-gray-600 mb-4">All parameters except <code class="bg-gray-100 px-1 rounded">size</code> are optional.</p>
            
            <%- include('partials/data-table', { 
                headers: ['Part', 'Required', 'Description'],
                rows: [
                    [{ html: '<code class="text-yellow-600">size</code>' }, { html: '<span class="text-green-600">Yes</span>' }, 'Image dimensions'],
                    [{ html: '<code class="text-blue-600">background</code>' }, { html: '<span class="text-gray-400">No</span>' }, 'Background color (default: #eeeeee)'],
                    [{ html: '<code class="text-pink-600">textColor</code>' }, { html: '<span class="text-gray-400">No</span>' }, 'Text color (default: #555555)'],
                    [{ html: '<code class="text-green-600">format</code>' }, { html: '<span class="text-gray-400">No</span>' }, 'Output format (default: svg)'],
                    [{ html: '<code class="text-purple-600">?text</code>' }, { html: '<span class="text-gray-400">No</span>' }, 'Custom display text'],
                    [{ html: '<code class="text-purple-600">?font</code>' }, { html: '<span class="text-gray-400">No</span>' }, 'Font family (default: lato)']
                ]
            }) %>
        </section>

        <!-- Parameters -->
        <section id="parameters" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">Parameters</h2>
            
            <h3 class="font-semibold mt-6 mb-3">Size</h3>
            <p class="text-gray-600 mb-3">Specify dimensions in pixels. Supports multiple formats:</p>
            <%- include('partials/data-table', { 
                headers: ['Format', 'Example', 'Result'],
                rows: [
                    ['Width x Height', { html: '<code>600x400</code>' }, '600px wide, 400px tall'],
                    ['Square', { html: '<code>400</code>' }, '400px x 400px'],
                    ['Retina (@2x)', { html: '<code>600x400@2x</code>' }, '1200px x 800px'],
                    ['Retina (@3x)', { html: '<code>400@3x</code>' }, '1200px x 1200px']
                ],
                className: 'mb-4'
            }) %>
            <p class="text-sm text-gray-500">Min: <%= config.MIN_SIZE %>px | Max: <%= config.MAX_SIZE %>px | Max scale: @<%= config.MAX_SCALE %>x</p>

            <h3 class="font-semibold mt-6 mb-3">Text</h3>
            <p class="text-gray-600 mb-3">Custom text displayed on the image. Use query parameter:</p>
            <%- include('partials/code-block', { code: baseUrl + '/600x400?text=Hello+World' }) %>
            <ul class="text-sm text-gray-600 space-y-1">
                <li>Use <code class="bg-gray-100 px-1 rounded">+</code> or <code class="bg-gray-100 px-1 rounded">%20</code> for spaces</li>
                <li>Use <code class="bg-gray-100 px-1 rounded">\n</code> for line breaks</li>
                <li>Default text shows dimensions (e.g., "600 x 400")</li>
            </ul>
        </section>

        <!-- Formats -->
        <section id="formats" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">Output Formats</h2>
            <%- include('partials/data-table', { 
                headers: ['Format', 'Usage', 'Transparency', 'Best For'],
                rows: [
                    [{ value: 'SVG', class: 'font-medium' }, { html: '<code>/600x400</code> <span class="text-gray-400">(default)</span>' }, { html: '<span class="text-green-600">Yes</span>' }, 'Scalable, smallest size'],
                    [{ value: 'PNG', class: 'font-medium' }, { html: '<code>/600x400/png</code>' }, { html: '<span class="text-green-600">Yes</span>' }, 'Lossless, wide support'],
                    [{ value: 'WebP', class: 'font-medium' }, { html: '<code>/600x400/webp</code>' }, { html: '<span class="text-green-600">Yes</span>' }, 'Modern browsers, good compression'],
                    [{ value: 'JPEG', class: 'font-medium' }, { html: '<code>/600x400/jpeg</code>' }, { html: '<span class="text-red-600">No</span>' }, 'Photos, legacy support'],
                    [{ value: 'AVIF', class: 'font-medium' }, { html: '<code>/600x400/avif</code>' }, { html: '<span class="text-green-600">Yes</span>' }, 'Best compression, newer browsers']
                ]
            }) %>
        </section>

        <!-- Colors -->
        <section id="colors" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">Colors</h2>
            <p class="text-gray-600 mb-4">Colors can be specified in multiple formats:</p>
            
            <%- include('partials/data-table', { 
                headers: ['Type', 'Example', 'URL'],
                rows: [
                    ['Hex (6 digits)', { html: '<span class="inline-block w-4 h-4 rounded" style="background:#3b82f6"></span> <code>3b82f6</code>' }, { html: '<code>/600x400/3b82f6/ffffff</code>' }],
                    ['Hex (3 digits)', { html: '<span class="inline-block w-4 h-4 rounded" style="background:#f00"></span> <code>f00</code>' }, { html: '<code>/600x400/f00/fff</code>' }],
                    ['Named colors', { html: '<span class="inline-block w-4 h-4 rounded bg-blue-500"></span> <code>blue</code>' }, { html: '<code>/600x400/blue/white</code>' }],
                    ['Transparent', { html: '<span class="inline-block w-4 h-4 rounded border border-gray-300" style="background:repeating-conic-gradient(#ccc 0% 25%, #fff 0% 50%) 50% / 8px 8px"></span> <code>transparent</code>' }, { html: '<code>/600x400/transparent/333/png</code>' }]
                ],
                className: 'mb-4'
            }) %>
            
            <p class="text-sm text-gray-500">Supported named colors: black, white, red, green, blue, yellow, orange, purple, pink, cyan, gray, and more.</p>
        </section>

        <!-- Fonts -->
        <section id="fonts" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">Fonts</h2>
            <p class="text-gray-600 mb-4">Use the <code class="bg-gray-100 px-1 rounded">font</code> query parameter to change the font:</p>
            <%- include('partials/code-block', { code: baseUrl + '/600x400?font=roboto' }) %>
            
            <h3 class="font-semibold mt-6 mb-3">Available Fonts</h3>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2">
                <% fonts.forEach(function(font) { %>
                <div class="bg-white border border-gray-200 rounded-lg p-3 text-center">
                    <code class="text-sm text-indigo-600"><%= font %></code>
                </div>
                <% }); %>
            </div>
        </section>

        <!-- Examples -->
        <section id="examples" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">Examples</h2>
            
            <div class="space-y-4">
                <%- include('partials/example-row', { 
                    baseUrl, 
                    title: 'Basic placeholder', 
                    imgSrc: baseUrl + '/150x100', 
                    displayUrl: baseUrl + '/600x400', 
                    copyUrl: baseUrl + '/600x400' 
                }) %>

                <%- include('partials/example-row', { 
                    baseUrl, 
                    title: 'Square image', 
                    imgSrc: baseUrl + '/100', 
                    displayUrl: baseUrl + '/400', 
                    copyUrl: baseUrl + '/400' 
                }) %>

                <%- include('partials/example-row', { 
                    baseUrl, 
                    title: 'Custom colors', 
                    imgSrc: baseUrl + '/150x100/3b82f6/ffffff', 
                    displayUrl: baseUrl + '/600x400/3b82f6/ffffff', 
                    copyUrl: baseUrl + '/600x400/3b82f6/ffffff' 
                }) %>

                <%- include('partials/example-row', { 
                    baseUrl, 
                    title: 'Custom text', 
                    imgSrc: baseUrl + '/150x100?text=Hello', 
                    displayUrl: baseUrl + '/600x400?text=Hello+World', 
                    copyUrl: baseUrl + '/600x400?text=Hello+World' 
                }) %>

                <%- include('partials/example-row', { 
                    baseUrl, 
                    title: 'Custom font', 
                    imgSrc: baseUrl + '/150x100/1f2937/f9fafb?font=poppins', 
                    displayUrl: baseUrl + '/600x400?font=poppins', 
                    copyUrl: baseUrl + '/600x400?font=poppins' 
                }) %>

                <%- include('partials/example-row', { 
                    baseUrl, 
                    title: 'PNG format', 
                    imgSrc: baseUrl + '/150x100/png', 
                    displayUrl: baseUrl + '/600x400/png', 
                    copyUrl: baseUrl + '/600x400/png' 
                }) %>

                <%- include('partials/example-row', { 
                    baseUrl, 
                    title: 'Transparent background', 
                    imgSrc: baseUrl + '/150x100/transparent/333/png', 
                    displayUrl: baseUrl + '/600x400/transparent/333/png', 
                    copyUrl: baseUrl + '/600x400/transparent/333/png',
                    transparent: true 
                }) %>

                <%- include('partials/example-row', { 
                    baseUrl, 
                    title: 'Retina (2x scale)', 
                    imgSrc: baseUrl + '/100@2x', 
                    displayUrl: baseUrl + '/600x400@2x', 
                    copyUrl: baseUrl + '/600x400@2x',
                    imgWidth: 'w-[100px]',
                    imgHeight: 'h-[100px]'
                }) %>
            </div>
        </section>

        <!-- HTML Usage -->
        <section id="html-usage" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">HTML Usage</h2>
            
            <h3 class="font-semibold mt-6 mb-3">Basic Image</h3>
            <%- include('partials/code-block', { code: '<img src="' + baseUrl + '/600x400" alt="Placeholder">' }) %>

            <h3 class="font-semibold mt-6 mb-3">Responsive with Retina</h3>
            <%- include('partials/code-block', { code: '<img \n  src="' + baseUrl + '/600x400" \n  srcset="' + baseUrl + '/600x400@2x 2x"\n  alt="Placeholder">', multiline: true }) %>

            <h3 class="font-semibold mt-6 mb-3">CSS Background</h3>
            <%- include('partials/code-block', { code: '.hero {\n  background-image: url(\'' + baseUrl + '/1920x1080\');\n  background-size: cover;\n}', multiline: true }) %>

            <h3 class="font-semibold mt-6 mb-3">Markdown</h3>
            <%- include('partials/code-block', { code: '![Placeholder](' + baseUrl + '/600x400)' }) %>
        </section>

        <!-- API -->
        <section id="api" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">API Reference</h2>
            
            <%- include('partials/data-table', { 
                headers: ['Endpoint', 'Description'],
                rows: [
                    [{ html: '<code>GET /</code>' }, 'Homepage'],
                    [{ html: '<code>GET /docs</code>' }, 'Documentation (this page)'],
                    [{ html: '<code>GET /health</code>' }, 'Health check with cache stats'],
                    [{ html: '<code>GET /:size</code>' }, 'Generate image with size only'],
                    [{ html: '<code>GET /:size/:format</code>' }, 'Generate image with format'],
                    [{ html: '<code>GET /:size/:bg/:color</code>' }, 'Generate image with colors'],
                    [{ html: '<code>GET /:size/:bg/:color/:format</code>' }, 'Generate image with colors and format']
                ]
            }) %>

            <h3 class="font-semibold mt-6 mb-3">Response Headers</h3>
            <ul class="text-sm text-gray-600 space-y-1">
                <li><code class="bg-gray-100 px-1 rounded">Cache-Control: public, max-age=31536000, immutable</code></li>
                <li><code class="bg-gray-100 px-1 rounded">X-Cache: HIT</code> or <code class="bg-gray-100 px-1 rounded">MISS</code></li>
            </ul>
        </section>

        <!-- Self-Hosting -->
        <section id="self-hosting" class="mb-10">
            <h2 class="text-xl font-semibold mb-4">Self-Hosting</h2>
            
            <h3 class="font-semibold mt-6 mb-3">Installation</h3>
            <%- include('partials/code-block', { code: 'git clone https://github.com/birajrai/chittra.git\ncd chittra\nnpm install\nnpm start', multiline: true }) %>

            <h3 class="font-semibold mt-6 mb-3">Using Bun</h3>
            <%- include('partials/code-block', { code: 'bun install\nbun start', multiline: true }) %>

            <h3 class="font-semibold mt-6 mb-3">Environment Variables</h3>
            <%- include('partials/data-table', { 
                headers: ['Variable', 'Default', 'Description'],
                rows: [
                    [{ html: '<code>PORT</code>' }, '3000', 'Server port'],
                    [{ html: '<code>HOST</code>' }, '0.0.0.0', 'Server host'],
                    [{ html: '<code>CHITTRA_CACHE_TTL</code>' }, '3600000', 'Cache TTL (ms)'],
                    [{ html: '<code>CHITTRA_CACHE_MAX_ITEMS</code>' }, '1000', 'Max cached items'],
                    [{ html: '<code>CHITTRA_CONCURRENCY</code>' }, '4', 'Max concurrent renders']
                ]
            }) %>
        </section>

        <%- include('partials/footer', { baseUrl }) %>
    </div>
<%- include('partials/scripts') %>
